$(function() {
    window.location.origin.indexOf("uemo.net") != -1 && (document.domain = "uemo.net", $("body").addClass("uemo")), window.location.origin.indexOf("jsmo.xin") != -1 && (document.domain = "jsmo.xin", $("body").addClass("jsmo"));
    var e, t, n = function() {
        var t = {};
        return t.addM = function(e) {
            return e ? e.indexOf("m=1") === -1 && (e += "&m=1") : e = "m=1", e
        }, t.getSearch = function(t) {
            t || (t = window);
            for (var n = e.location.search.length > 0 ? e.location.search.substring(1) : "", i = {}, o = n.length ? n.split("&") : [], a = null, s = null, r = null, c = 0, l = o.length, c = 0; c < l; c++) {
                a = o[c].split("="), s = decodeURIComponent(a[0]), r = decodeURIComponent(a[1]);
                for (var c = 0; c < a.length; c++) i[s] = r
            }
            return i
        }, t.setMask = function(e, t) {
            t ? e ? $("#mask").fadeIn(0) : $("#mask").fadeOut("slow") : e ? ($("#mask").fadeIn(0), $(".controlMask").slideDown()) : ($("#mask").fadeOut("slow"), $(".controlMask").slideUp("slow"))
        }, t.setQR = function(e, t) {
            jQuery(e).html(""), window.location.origin.indexOf("uemo.net") != -1 && (t = $("#contentFrame").data("src")), window.location.origin.indexOf("jsmo.xin") != -1 && (t = $("#contentFrame").data("src").replace("uemo.net", "jsmo.xin")), jQuery(e).qrcode(t)
        }, t.addM = function(e) {
            return e ? e.indexOf("m=1") === -1 && (e += "&m=1") : e = "m=1", e
        }, t
    }();
    (function() {
        function i() {
            console.log($("#contentFrame"))
            e = $("#contentFrame")[0].contentWindow,
            t = e.$ || $,
            c = $("#themeCssPath", e.document),
            l = a(),
            $(".theme-b").removeClass("active"),
            l && $(".theme-select nav span").each(function(e, t) {
                $(t).data("value") == l && $(t).trigger("click")
            }),
            n.setMask(!1)
        }

        function o(t, i) {
            if ($("#contentArea").removeClass().addClass(t), window.location.href.indexOf("/nf/1") == -1)
                if (n.setMask(!0), $(i).hasClass("mobile") || $(i).hasClass("tablet")) {
                    var o = e.location.search;
                    e.location.search = n.addM(o)
                } else e.location.search = ""
        }

        function a() {
            var e = "";
            return $(".theme-select nav span").each(function(t, n) {
                $(n).hasClass("active") && (e = $(n).data("value"))
            }), e
        }

        function s() {
            t("body").on("click", "a", function(t) {
                if ("#" != $(this).attr("href")) {
                    var i = $(this).attr("href");
                    $(this).attr("target");
                    if ("undefined" == typeof i) return !1;
                    if (i.indexOf("http") == -1 && i.indexOf("https") == -1 && !/^\/\//.test("//") || 0 === i.length) return !1;
                    if (1 == i.indexOf("uemo.net") || 1 == i.indexOf("jsmo.xin")) return e.open(i, "_self"), !1;
                    var o = n.getSearch(e);
                    return t.preventDefault(), 1 == o.m ? (i.indexOf("uemo.net") != -1 && (e.location.href = i + "?m=1"), i.indexOf("jsmo.xin") != -1 && (e.location.href = i + "?m=1"), !1) : (e.location.href = i, !1)
                }
            })
        }

        function r(e, n) {
            var i = c.attr("href").replace(/(\w+)\.css$/, e + ".css"),
                o = t("html")[0].className.replace(/theme-(\w{2,})/, "theme-" + e).replace(/theme-(w|b)\s/, n + " ");
            t("html")[0].className = o, c.attr("href", i)
        }
        var c, l, d = !1,
            f = $(".trybtn").attr("href"),
            u = $("#contentFrame").data("src");
        window.location.origin.indexOf("uemo.net") != -1 && (u = $("#contentFrame").data("src")), window.location.origin.indexOf("jsmo.xin") != -1 && (u = $("#contentFrame").data("src").replace("uemo.net", "jsmo.xin")), $("#contentFrame").attr("src", u).on("load", function() {
                d = !0, i();
                n.getSearch(e);
                s(), n.setQR(".qrcondeArea", $("#contentFrame").data("src"))
            }), setTimeout(function() {
                n.setMask(!1, !0)
            }, 1e3), $(".theme-select nav").on("click", "span", function() {
                if (!d) return !1;
                var e = $(this).data("value"),
                    t = $(this).data("theme");
                $(this).addClass("active"), $(this).siblings(".active").removeClass("active"), r(e, t), l = e, $(".trybtn").attr("href", f + "?utheme=" + l)
            }), $(".device-select").on("click", "a", function() {
                if (!d) return !1;
                var e = $(this).data("value");
                $(this).siblings(".active").removeClass("active"), $(this).addClass("active"), o(e, this)
            }),
            function() {
                var t = !1;
                $(".select-input").on("click", ".text-input", function(e) {
                    var n = this;
                    return par = $(e.delegateTarget), input = par.find(".text-input input"), option = par.find(".select-option"), t ? (t = !1, $("body").off("click"), $(this).find(".fa").removeClass("open"), option.slideUp()) : (t = !0, $("body").on("click", function() {
                        t = !1, $(n).find(".fa").removeClass("open"), option.slideUp()
                    }), $(this).find(".fa").addClass("open"), option.slideDown()), !1
                }), $(".select-input").on("click", ".select-option a", function(t) {
                    var n = $(t.delegateTarget),
                        i = n.find(".text-input input");
                    n.find(".select-option");
                    window.location.origin.indexOf("uemo.net") != -1 && (e.location = $(this).data("href"), i.prop("value", $(this).text())), window.location.origin.indexOf("jsmo.xin") != -1 && (e.location = $(this).data("href").replace("uemo.net", "jsmo.xin"), i.prop("value", $(this).text()))
                })
            }()
    })()
});